---
title: "Extracting information from cranly package networks: extractors and word clouds"
author: "[Ioannis Kosmidis](https://www.ikosmidis.com)"
date: "2022-08-23"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Extractors and word clouds}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---




# **cranly** extractor functions

Since version 0.3, **cranly** includes functions for extracting information from `cranly_network` objects (see `?extractor-functions`). All extractor functions in `cranly` try to figure out what `y` is in the statements

`y` is [the] `extractor-function` a `package`/`author`

### CRAN package directives and author collaboration networks

Let's attach **cranly**

```r
library("cranly")
```
and use the package directives and author collaboration networks from CRAN's state on 2022-07-03 14:37:31 BST

```r
data("package_network", package = "cranly")
data("author_newtwork", package = "cranly")
#> Warning in data("author_newtwork", package = "cranly"): data set
#> 'author_newtwork' not found
```
Alternatively, today's package directives and author collaboration networks can be constructed by doing 

```r
cran_db <- clean_CRAN_db()
package_network <- build_network(cran_db)
author_network <- build_network(cran_db, perspective = "author")
```

# Example queries

#### Packages by Kurt Hornik

```r
package_network |> package_by("Kurt Hornik", exact = TRUE)
#>  [1] "arules"             "bibtex"             "bindata"           
#>  [4] "cclust"             "chron"              "clue"              
#>  [7] "cluster"            "coin"               "colorspace"        
#> [10] "cordillera"         "ctv"                "date"              
#> [13] "dendextend"         "digest"             "e1071"             
#> [16] "exactRankTests"     "fortunes"           "gap"               
#> [19] "gsignal"            "ISOcodes"           "isotone"           
#> [22] "kernlab"            "MASS"               "mda"               
#> [25] "mistr"              "movMF"              "mvord"             
#> [28] "nloptr"             "NLP"                "NLPclient"         
#> [31] "NLPutils"           "OAIHarvester"       "openNLP"           
#> [34] "openNLPdata"        "opGMMassessment"    "oz"                
#> [37] "pandocfilters"      "party"              "polyclip"          
#> [40] "polynom"            "PolynomF"           "princurve"         
#> [43] "qrmdata"            "qrmtools"           "Rcplex"            
#> [46] "relations"          "Rglpk"              "RKEA"              
#> [49] "RKEAjars"           "ROI"                "ROI.plugin.msbinlp"
#> [52] "Rpoppler"           "Rsymphony"          "RWeka"             
#> [55] "RWekajars"          "seriation"          "sets"              
#> [58] "signal"             "skmeans"            "slam"              
#> [61] "stablelearner"      "strucchange"        "strucchangeRcpp"   
#> [64] "tau"                "textcat"            "textplot"          
#> [67] "tm"                 "tm.plugin.mail"     "topicmodels"       
#> [70] "tseries"            "TSP"                "Unicode"           
#> [73] "vcd"                "W3CMarkupValidator" "WeightSVM"         
#> [76] "wordnet"
```

#### Packages by people named "Ioannis"

```r
package_network |> package_by("Ioannis")
#>  [1] "BCT"              "betareg"          "brglm"            "brglm2"          
#>  [5] "camtrapR"         "detectseparation" "enrichwith"       "FLR"             
#>  [9] "IPMbook"          "MXM"              "PlackettLuce"     "profileModel"    
#> [13] "Rfast"            "trackeR"          "trackeRapp"       "USP"
```

#### Packages with "glm" in their name

```r
author_network |> package_with("glm")
#>  [1] "glmlep"          "glmnet"          "biglm"           "biglmm"         
#>  [5] "dbglm"           "glm2"            "glmertree"       "glmx"           
#>  [9] "cglm"            "glmmTMB"         "aglm"            "StroupGLMM"     
#> [13] "fastglm"         "bestglm"         "eventglm"        "GLMaSPU"        
#> [17] "glmbb"           "glmm"            "AutoStepwiseGLM" "glmnetUtils"    
#> [21] "glmvsd"          "GLMpack"         "poisson.glm.mix" "glmmfields"     
#> [25] "HBglm"           "brglm"           "brglm2"          "GLMMRR"         
#> [29] "plsRglm"         "glmdisc"         "GLMMadaptive"    "BranchGLM"      
#> [33] "glm.predict"     "mbrglm"          "CPMCGLM"         "hdpGLM"         
#> [37] "CIS.DGLM"        "SplitGLM"        "icdGLM"          "misclassGLM"    
#> [41] "pglm"            "hglm"            "hglm.data"       "RPEGLMEN"       
#> [45] "glmpath"         "GlmSimulatoR"    "glmc"            "randomGLM"      
#> [49] "glmmEP"          "dglm"            "GLMsData"        "DGLMExtPois"    
#> [53] "dhglm"           "mdhglm"          "ezglm"           "parglm"         
#> [57] "holiglm"         "glmmML"          "MGLM"            "FGLMtrunc"      
#> [61] "gglm"            "speedglm"        "glmm.hp"         "glm.deploy"     
#> [65] "glmtlp"          "GLMcat"          "glmtree"         "glme"           
#> [69] "glmglrt"         "glmmLasso"       "glmmPen"         "glmnetcr"       
#> [73] "glmpathcr"       "glmnetSE"        "glmpca"          "glmtoolbox"     
#> [77] "glmtrans"        "glmulti"         "glmxdiag"        "HDGLM"          
#> [81] "simglm"          "ICglm"           "mglmn"           "lsplsGlm"       
#> [85] "MCMCglmm"        "mcemGLM"         "mcglm"           "robmixglm"      
#> [89] "mvglmmRank"      "r2glmm"          "oglmx"           "prettyglm"      
#> [93] "QGglmm"          "stepjglm"
```

#### Authors of the [`lubridate`](https://cran.r-project.org/package=lubridate) package

```r
package_network |> author_of("lubridate", exact = TRUE)
#>  [1] "Vitalie Spinu"     "Garrett Grolemund" "Hadley Wickham"   
#>  [4] "Davis Vaughan"     "Ian Lyttle"        "Imanuel Costigan" 
#>  [7] "Jason Law"         "Doug Mitarotonda"  "Joseph Larmarange"
#> [10] "Jonathan Boiser"   "Chel Hee Lee"      "Google Inc"
```

#### Authors with "Ioan" in their name

```r
package_network |> author_with("Ioan")
#>  [1] "Ioan Gabriel Bucur"     "Ioannis Papageorgiou"   "Ioannis Kontoyiannis"  
#>  [4] "Ioannis Kosmidis"       "Ioanna Manolopoulou"    "Ioannis Alexiou"       
#>  [7] "Ioannis N Athanasiadis" "Ioannis Ntzoufras"      "Ioannis Tsamardinos"   
#> [10] "Alex Ioannides"         "Eleni Ioanna Delatola"  "Ioana-Elena Oana"      
#> [13] "Lazaros Ioannidis"
```

#### Packages suggested by, imported by and enhanced by the [`sf`](https://cran.r-project.org/package=sf) package

```r
package_network |> suggested_by("sf", exact = TRUE)
#>  [1] "blob"            "covr"            "dplyr"           "ggplot2"        
#>  [5] "knitr"           "lwgeom"          "maps"            "mapview"        
#>  [9] "Matrix"          "microbenchmark"  "odbc"            "pillar"         
#> [13] "pool"            "raster"          "rlang"           "rmarkdown"      
#> [17] "RPostgres"       "RPostgreSQL"     "RSQLite"         "sp"             
#> [21] "spatstat"        "spatstat.geom"   "spatstat.random" "spatstat.linnet"
#> [25] "spatstat.utils"  "stars"           "terra"           "testthat"       
#> [29] "tibble"          "tidyr"           "tidyselect"      "tmap"           
#> [33] "vctrs"           "wk"
package_network |> imported_by("sf", exact = TRUE)
#>  [1] "classInt"  "DBI"       "graphics"  "grDevices" "grid"      "magrittr" 
#>  [7] "Rcpp"      "s2"        "stats"     "tools"     "units"     "utils"
package_network |> enhanced_by("sf", exact = TRUE)
#> character(0)
```

#### Packages that are suggesting, importing, enhancing the [`sf`](https://cran.r-project.org/package=sf) package

```r
package_network |> suggesting("sf", exact = TRUE)
#>   [1] "accessibility"    "adklakedata"      "apsimx"          
#>   [4] "argoFloats"       "auk"              "BiodiversityR"   
#>   [7] "BIOMASS"          "biscale"          "bmstdr"          
#>  [10] "BSBT"             "cancensus"        "CAST"            
#>  [13] "censusxy"         "ckanr"            "climaemet"       
#>  [16] "climatrends"      "cmhc"             "collapse"        
#>  [19] "colorist"         "ctmm"             "dataRetrieval"   
#>  [22] "deckgl"           "DeclareDesign"    "disdat"          
#>  [25] "dodgr"            "easycensus"       "echelon"         
#>  [28] "echor"            "EcoIndR"          "efdm"            
#>  [31] "ENMeval"          "eRTG3D"           "eurostat"        
#>  [34] "fasterize"        "febr"             "gdalcubes"       
#>  [37] "gear"             "geocmeans"        "geodaData"       
#>  [40] "geohashTools"     "geojson"          "geometa"         
#>  [43] "geomtextpath"     "geos"             "gfcanalysis"     
#>  [46] "ggblanket"        "ggformula"        "gghighlight"     
#>  [49] "gginnards"        "ggiraph"          "ggpattern"       
#>  [52] "ggplot2"          "ggrastr"          "googlePolylines" 
#>  [55] "graphhopper"      "graticule"        "grwat"           
#>  [58] "gstat"            "gtfsrouter"       "ipumsr"          
#>  [61] "isoband"          "janitor"          "jsonlite"        
#>  [64] "kdtools"          "leaflet"          "leaflet.extras2" 
#>  [67] "leri"             "lutz"             "mapsFinland"     
#>  [70] "mdsr"             "metamer"          "mlr"             
#>  [73] "mlr3spatial"      "mlr3spatiotempcv" "mudata2"         
#>  [76] "NetLogoR"         "nlaR"             "o2geosocial"     
#>  [79] "oce"              "od"               "onemapsgapi"     
#>  [82] "opencage"         "osmdata"          "palmid"          
#>  [85] "pinochet"         "plainview"        "plotly"          
#>  [88] "PointedSDMs"      "polyCub"          "polylabelr"      
#>  [91] "protolite"        "raster"           "rasterVis"       
#>  [94] "rayrender"        "rayshader"        "rcartocolor"     
#>  [97] "rdhs"             "readwritesqlite"  "regional"        
#> [100] "regweight"        "reproducible"     "rgbif"           
#> [103] "rgee"             "RGENERATEPREC"    "rGhanaCensus"    
#> [106] "rgrass7"          "rinat"            "rmangal"         
#> [109] "RtD3"             "sbtools"          "sdcSpatial"      
#> [112] "sdmApp"           "sociome"          "soilDB"          
#> [115] "sp"               "spacetime"        "SpaDES.tools"    
#> [118] "SpatialBSS"       "spbabel"          "spData"          
#> [121] "spflow"           "spotoroo"         "spsur"           
#> [124] "strm"             "swmmr"            "terra"           
#> [127] "tgver"            "tricolore"        "ukpolice"        
#> [130] "unifir"           "ursa"             "USAboundaries"   
#> [133] "waterquality"     "wk"
package_network |> importing("sf", exact = TRUE)
#>   [1] "abstr"                "adw"                  "amt"                 
#>   [4] "areal"                "ARPALData"            "ascotraceR"          
#>   [7] "aurin"                "BARIS"                "basemaps"            
#>  [10] "bayesmove"            "bcdata"               "bcputility"          
#>  [13] "bdc"                  "bdl"                  "BIEN"                
#>  [16] "bigDM"                "blockCV"              "bluebike"            
#>  [19] "bnspatial"            "briskaR"              "btb"                 
#>  [22] "buffeRs"              "camtrapR"             "capm"                
#>  [25] "CARBayes"             "CARBayesdata"         "CARBayesST"          
#>  [28] "card"                 "cartograflow"         "cartogram"           
#>  [31] "cartogramR"           "cartography"          "CatastRo"            
#>  [34] "cdcfluview"           "cdrcR"                "censable"            
#>  [37] "chirps"               "clhs"                 "ClimMobTools"        
#>  [40] "comorosmaps"          "concaveman"           "conleyreg"           
#>  [43] "ConR"                 "CopernicusDEM"        "covid19br"           
#>  [46] "covid19sf"            "covidcast"            "crawl"               
#>  [49] "crimedata"            "CropScapeR"           "crsuggest"           
#>  [52] "cshapes"              "CSHShydRology"        "csodata"             
#>  [55] "cubble"               "cyclestreets"         "datazoom.amazonia"   
#>  [58] "daymetr"              "Directional"          "distanceto"          
#>  [61] "divseg"               "dsims"                "dssd"                
#>  [64] "dwp"                  "ebirdst"              "edbuildmapr"         
#>  [67] "eiCompare"            "eks"                  "elevatr"             
#>  [70] "EmissV"               "envirem"              "epiR"                
#>  [73] "epm"                  "eSDM"                 "exactextractr"       
#>  [76] "extRatum"             "FedData"              "fgdr"                
#>  [79] "FIESTA"               "FIESTAutils"          "fisheye"             
#>  [82] "fitbitViz"            "flexpolyline"         "flightplot"          
#>  [85] "foieGras"             "forestecology"        "FORTLS"              
#>  [88] "fsr"                  "galah"                "GapAnalysis"         
#>  [91] "gbm.auto"             "gdalUtilities"        "GeNetIt"             
#>  [94] "geodimension"         "geodiv"               "geodrawr"            
#>  [97] "geofacet"             "geofi"                "geogrid"             
#> [100] "geojsonio"            "geomander"            "geomaroc"            
#> [103] "geometr"              "geonetwork"           "geostan"             
#> [106] "geouy"                "geoviz"               "ggOceanMaps"         
#> [109] "ggseg"                "ggsn"                 "ggspatial"           
#> [112] "ggVennDiagram"        "giscoR"               "glottospace"         
#> [115] "grainchanger"         "graph4lg"             "GREENeR"             
#> [118] "gridpattern"          "gtfs2gps"             "gtfstools"           
#> [121] "gwavr"                "GWnnegPCA"            "GWpcor"              
#> [124] "gwpcormapper"         "GWSDAT"               "h3jsr"               
#> [127] "happign"              "helsinki"             "hereR"               
#> [130] "himach"               "hwsdr"                "hypsoLoop"           
#> [133] "IceSat2R"             "idbr"                 "imcRtools"           
#> [136] "itsdm"                "japanmesh"            "jpgrid"              
#> [139] "jpmesh"               "klexdatr"             "kokudosuuchi"        
#> [142] "LAGOSNE"              "landsepi"             "latticeDensity"      
#> [145] "layer"                "lazysf"               "lconnect"            
#> [148] "leafem"               "leafgl"               "leafpm"              
#> [151] "leafpop"              "lidaRtRee"            "lidR"                
#> [154] "linemap"              "link2GI"              "LMoFit"              
#> [157] "lwgeom"               "macleish"             "MainExistingDatasets"
#> [160] "mapboxapi"            "mapchina"             "mapedit"             
#> [163] "mapi"                 "mapiso"               "mapme.biodiversity"  
#> [166] "mapping"              "mapsapi"              "mapscanner"          
#> [169] "mapsf"                "mapSpain"             "maptiles"            
#> [172] "mapview"              "MazamaSpatialPlots"   "meteoland"           
#> [175] "meteospain"           "mgwrsar"              "MODISTools"          
#> [178] "MODIStsp"             "motif"                "moveVis"             
#> [181] "mregions"             "MTA"                  "naturaList"          
#> [184] "ncdfgeom"             "netmap"               "nhdplusTools"        
#> [187] "nhdR"                 "NipponMap"            "njgeo"               
#> [190] "nlrx"                 "nominatimlite"        "oceanic"             
#> [193] "oceanis"              "opendatatoronto"      "openeo"              
#> [196] "opentripplanner"      "Orcs"                 "osmextract"          
#> [199] "osrm"                 "otpr"                 "owidR"               
#> [202] "ows4R"                "ozmaps"               "paleopop"            
#> [205] "parlitools"           "pct"                  "pgirmess"            
#> [208] "PL94171"              "PlanetNICFI"          "plotdap"             
#> [211] "plotKML"              "populR"               "potential"           
#> [214] "pRecipe"              "prisonbrief"          "pspatreg"            
#> [217] "PWFSLSmoke"           "qualmap"              "quickmapr"           
#> [220] "r5r"                  "raceland"             "rangemap"            
#> [223] "rangeMapper"          "rasterbc"             "rasterDT"            
#> [226] "rasterpic"            "raytracing"           "rbenvo"              
#> [229] "rcage"                "redist"               "redistmetrics"       
#> [232] "Relectoral"           "remap"                "rerddapXtracto"      
#> [235] "rFIA"                 "rfishnet2"            "RFmerge"             
#> [238] "rgeoda"               "rgeopat2"             "rgugik"              
#> [241] "rmapshaper"           "rmapzen"              "rnaturalearth"       
#> [244] "roads"                "robis"                "RPyGeo"              
#> [247] "Rsagacmd"             "rsat"                 "RStoolbox"           
#> [250] "rts2"                 "rtsVis"               "RWmisc"              
#> [253] "sabre"                "safedata"             "sandwichr"           
#> [256] "SDLfilter"            "secr"                 "segmetric"           
#> [259] "sen2r"                "sfarrow"              "sfdct"               
#> [262] "sfdep"                "sfhotspot"            "sfnetworks"          
#> [265] "sftrack"              "sgsR"                 "simodels"            
#> [268] "simplevis"            "sits"                 "smartmap"            
#> [271] "smile"                "SMITIDstruct"         "smoothr"             
#> [274] "spacejamr"            "spatgeom"             "spatialEco"          
#> [277] "SpatialKDE"           "SpatialPosition"      "spatialrisk"         
#> [280] "spatialsample"        "spectator"            "spectralR"           
#> [283] "sphet"                "spnaf"                "spNetwork"           
#> [286] "spqdep"               "SRTsim"               "starsTileServer"     
#> [289] "stats19"              "stplanr"              "stppSim"             
#> [292] "sugarbag"             "SUNGEO"               "supercells"          
#> [295] "swfscDAS"             "swfscMisc"            "SWMPrExtension"      
#> [298] "SWTools"              "synoptReg"            "tanaka"              
#> [301] "telemac"              "terrainr"             "tidycensus"          
#> [304] "tidygeoRSS"           "tidyterra"            "tidytransit"         
#> [307] "tidyUSDA"             "tigris"               "tilemaps"            
#> [310] "tmap"                 "tmaptools"            "tongfen"             
#> [313] "track2KBA"            "trackeRapp"           "transformr"          
#> [316] "treetop"              "trigpoints"           "uavRmp"              
#> [319] "upstartr"             "valhallr"             "valuemap"            
#> [322] "VancouvR"             "VARMER"               "vein"                
#> [325] "velociraptr"          "VicmapR"              "vietnameseConverter" 
#> [328] "webTRISr"             "weed"                 "WEGE"                
#> [331] "wildlifeDI"           "zonebuilder"
package_network |> enhancing("sf", exact = TRUE)
#> [1] "landscapemetrics"
```

#### Packages that depend on the [`sf`](https://cran.r-project.org/package=sf) package

```r
package_network |> depending_on("sf", exact = TRUE)
#>  [1] "APAtree"    "arcpullr"   "basf"       "bcmaps"     "canadamaps"
#>  [6] "CCAMLRGIS"  "chilemapas" "ecochange"  "GADMTools"  "habCluster"
#> [11] "micromap"   "nngeo"      "prioritizr" "RCzechia"   "RGISTools" 
#> [16] "rLFT"       "sftime"     "siland"     "spatialreg" "spdep"     
#> [21] "spsurvey"   "sspm"       "stars"      "starsExtra" "stcos"     
#> [26] "tilegramsR" "transfR"    "wdnr.gis"   "wdpar"      "windAC"
```

#### Packages that are dependencies of the [`sf`](https://cran.r-project.org/package=sf) package

```r
package_network |> dependency_of("sf", exact = TRUE)
#> [1] "methods"
```

#### Packages maintained by everyone with "Helen" in their name

```r
package_network |> maintained_by("Helen")
#> [1] "bild"     "cold"     "GENLIB"   "microPop" "villager"
```

#### All available info, on packages maintained by everyone with "Helen" in their name

```r
package_network |> maintained_by("Helen", flat = FALSE) |> dim()
#> [1]  5 67
```

#### The maintainer of [`data.table`](https://cran.r-project.org/package=data.table)

```r
package_network |> maintainer_of("data.table", exact = TRUE)
#> [1] "Matt Dowle"
```

#### The email of the maintainer of [`trackeRapp`](https://cran.r-project.org/package=trackeRapp)

```r
trackeRapp_maintainer <- package_network |> maintainer_of("trackeRapp", exact = TRUE)
package_network |> email_of(trackeRapp_maintainer, exact = TRUE)
#> [1] "ioannis.kosmidis@warwick.ac.uk"
```

#### All emails of maintainers using an email address from University of Warwick

```r
package_network |> email_with("warwick.ac.uk")
#>  [1] "nick.parsons@warwick.ac.uk"       "ioannis.kosmidis@warwick.ac.uk"  
#>  [3] "haotian.xu@warwick.ac.uk"         "s.tavakoli@warwick.ac.uk"        
#>  [5] "d.selby@warwick.ac.uk"            "s.stein@warwick.ac.uk"           
#>  [7] "Nicole.Schwitter.1@warwick.ac.uk" "tom.berrett@warwick.ac.uk"       
#>  [9] "a.dickerson@warwick.ac.uk"        "d.firth@warwick.ac.uk"           
#> [11] "michelle.kendall@warwick.ac.uk"
```

#### The title, the description, the version and the license of the [`semnar`](https://cran.r-project.org/package=semnar) package

```r
package_network |> title_of("semnar", exact = TRUE)
#> character(0)
package_network |> description_of("semnar", exact = TRUE)
#> character(0)
package_network |> version_of("semnar", exact = TRUE)
#> character(0)
```

#### Distribution of the release dates of all packages in CRAN

```r
package_network |> release_date_of(Inf) |>
    hist(breaks = 50, main = "", xlab = "date", freq = TRUE)
```

<img src="precomp-extractors-unnamed-chunk-19-1.png" title="plot of chunk unnamed-chunk-19" alt="plot of chunk unnamed-chunk-19" width="100%" />

# Word clouds
Since version 0.5 **cranly** provides methods to construct word clouds of either author names, package descriptions or package titles. For example, the word cloud of the descriptions of the packages maintained by me and Edzer Pebesma are

```r
word_cloud(package_network, maintainer = "Ioannis Kosmidis", exact = TRUE, min.freq = 1)
```

<img src="precomp-extractors-unnamed-chunk-20-1.png" title="plot of chunk unnamed-chunk-20" alt="plot of chunk unnamed-chunk-20" width="100%" />

```r
word_cloud(package_network, maintainer = "Edzer Pebesma", exact = TRUE, min.freq = 1)
```

<img src="precomp-extractors-unnamed-chunk-20-2.png" title="plot of chunk unnamed-chunk-20" alt="plot of chunk unnamed-chunk-20" width="100%" />

or the word cloud of the titles of those packages are

```r
word_cloud(package_network, maintainer = "Ioannis Kosmidis", perspective = "title", exact = TRUE,
           scale = c(2, 0.1), min.freq = 1)
```

<img src="precomp-extractors-unnamed-chunk-21-1.png" title="plot of chunk unnamed-chunk-21" alt="plot of chunk unnamed-chunk-21" width="100%" />

```r
word_cloud(package_network, maintainer = "Edzer Pebesma", perspective = "title", exact = TRUE,
           scale = c(2, 0.1), min.freq = 1)
```

<img src="precomp-extractors-unnamed-chunk-21-2.png" title="plot of chunk unnamed-chunk-21" alt="plot of chunk unnamed-chunk-21" width="100%" />

More complex queries can be achieved by using the extractor functions and computing the term frequencies manually. For example, the word cloud of all packages maintained by people with "warwick.ac.uk" in their email is

```r
warwick_emails <- package_network |> email_with("warwick.ac.uk", flat = FALSE)
warwick_pkgs  <- warwick_emails$package
descriptions <- package_network |> description_of(warwick_pkgs, exact = FALSE)
term_frequency <- compute_term_frequency(descriptions)
word_cloud(term_frequency, min.freq = 5)
```

<img src="precomp-extractors-unnamed-chunk-22-1.png" title="plot of chunk unnamed-chunk-22" alt="plot of chunk unnamed-chunk-22" width="100%" />
